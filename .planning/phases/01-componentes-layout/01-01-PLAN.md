---
phase: 01-componentes-layout
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/transactions/status-toggle-button.tsx
  - src/components/transactions/transaction-card.tsx
autonomous: true

must_haves:
  truths:
    - "StatusToggleButton renderiza como botao circular touch-friendly"
    - "Toggle tem area de toque minima de 44x44px"
    - "Verde com check quando completed, borda pontilhada quando planned"
    - "TransactionCard usa StatusToggleButton no lugar do toggle inline"
  artifacts:
    - path: "src/components/transactions/status-toggle-button.tsx"
      provides: "Componente StatusToggleButton reutilizavel"
      exports: ["StatusToggleButton"]
    - path: "src/components/transactions/transaction-card.tsx"
      provides: "TransactionCard atualizado com novo toggle"
      contains: "StatusToggleButton"
  key_links:
    - from: "src/components/transactions/transaction-card.tsx"
      to: "src/components/transactions/status-toggle-button.tsx"
      via: "import { StatusToggleButton }"
      pattern: "StatusToggleButton"
---

<objective>
Criar componente StatusToggleButton touch-friendly e integrar no TransactionCard.

Purpose: Toggle atual tem 24px, precisa de 44px pra ser usavel em mobile.
Output: StatusToggleButton.tsx reutilizavel + TransactionCard atualizado.
</objective>

<execution_context>
@/Users/charbellelopes/.claude/get-shit-done/workflows/execute-plan.md
@/Users/charbellelopes/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@src/components/transactions/transaction-card.tsx
@src/lib/hooks/use-transactions.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Criar StatusToggleButton</name>
  <files>src/components/transactions/status-toggle-button.tsx</files>
  <action>
Criar componente StatusToggleButton com:

Props:
- status: "planned" | "completed"
- onToggle: () => void
- disabled?: boolean
- size?: "sm" | "md" (md = 44px default, sm = 32px para casos especiais)

Visual:
- completed: fundo verde (bg-income), icone Check branco, borda solida
- planned: fundo transparente, borda pontilhada cinza, sem icone (hover mostra Check fantasma)
- Touch target: minimo 44x44px (usando padding se necessario)
- Loading state: Loader2 animado durante toggle

Usar cn() para classes condicionais. Exportar como named export.
  </action>
  <verify>
Arquivo existe em src/components/transactions/status-toggle-button.tsx
Exporta StatusToggleButton
Tem prop size com default "md" e minimo 44px
  </verify>
  <done>
StatusToggleButton criado com visual correto e touch target 44px
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrar StatusToggleButton no TransactionCard</name>
  <files>src/components/transactions/transaction-card.tsx</files>
  <action>
Refatorar TransactionCard para usar StatusToggleButton:

1. Importar StatusToggleButton do arquivo criado
2. Substituir o botao inline (linhas ~162-178) pelo StatusToggleButton
3. Passar props: status={transaction.status}, onToggle={handleToggleStatus}, disabled={isToggling}
4. Manter logica de selectionMode (quando selectable=true, mostra Checkbox ao inves do toggle)
5. Remover imports de Check, Loader2 que eram usados no toggle antigo (manter se usados em outro lugar)

NAO mudar:
- Props do TransactionCard
- Logica de handleToggleStatus
- Layout geral do card
  </action>
  <verify>
grep "StatusToggleButton" src/components/transactions/transaction-card.tsx
npm run build (deve compilar sem erros)
  </verify>
  <done>
TransactionCard usa StatusToggleButton
Toggle tem area de toque 44x44px
Visual identico ao especificado (verde=pago, pontilhado=pendente)
  </done>
</task>

</tasks>

<verification>
1. StatusToggleButton existe e exporta componente
2. TransactionCard importa e usa StatusToggleButton
3. `npm run build` compila sem erros
4. Toggle visualmente diferente: verde com check = pago, borda pontilhada = pendente
</verification>

<success_criteria>
- StatusToggleButton como componente isolado
- Touch target >= 44px verificavel via inspecao
- TransactionCard usando novo toggle
- Build passa
</success_criteria>

<output>
After completion, create `.planning/phases/01-componentes-layout/01-01-SUMMARY.md`
</output>
