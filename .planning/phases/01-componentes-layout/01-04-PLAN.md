---
phase: 01-componentes-layout
plan: 04
type: execute
wave: 2
depends_on: ["01-02"]
files_modified:
  - src/app/(dashboard)/transacoes/page.tsx
autonomous: true

must_haves:
  truths:
    - "Transacoes page usa useTransactionFilters hook"
    - "Transacoes page usa TransactionFilters componente"
    - "Logica de filtro removida em favor do hook"
  artifacts:
    - path: "src/app/(dashboard)/transacoes/page.tsx"
      provides: "Transacoes usando componentes compartilhados"
      contains: "useTransactionFilters"
  key_links:
    - from: "src/app/(dashboard)/transacoes/page.tsx"
      to: "src/lib/hooks/use-transaction-filters.ts"
      via: "import { useTransactionFilters }"
      pattern: "useTransactionFilters"
    - from: "src/app/(dashboard)/transacoes/page.tsx"
      to: "src/components/transactions/transaction-filters.tsx"
      via: "import { TransactionFilters }"
      pattern: "TransactionFilters"
---

<objective>
Integrar componentes compartilhados na pagina Transacoes.

Purpose: Unificar uso de componentes entre Dashboard e Transacoes.
Output: Transacoes usando mesmos hooks e componentes.
</objective>

<execution_context>
@/Users/charbellelopes/.claude/get-shit-done/workflows/execute-plan.md
@/Users/charbellelopes/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-componentes-layout/01-02-SUMMARY.md
@src/app/(dashboard)/transacoes/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Integrar useTransactionFilters na pagina Transacoes</name>
  <files>src/app/(dashboard)/transacoes/page.tsx</files>
  <action>
Refatorar pagina Transacoes:

1. Importar useTransactionFilters de @/lib/hooks/use-transaction-filters
2. Importar TransactionFilters de @/components/transactions/transaction-filters
3. Usar useTransactionFilters no lugar de:
   - statusFilter state (linha ~30)
   - pendingCount/completedCount useMemo (linhas ~63-69)
   - Parte da logica de filteredAndSortedTransactions

4. Substituir StatusFilterTabs inline (linhas ~165-208) por TransactionFilters

5. Manter separado:
   - typeFilter (receita/despesa) - especifico desta pagina
   - sortField/sortOrder - especifico desta pagina
   - selectionMode - especifico desta pagina

Logica de merge:
- Hook retorna filtered por status
- Aplicar typeFilter e sort DEPOIS do hook filter

```typescript
const { filtered: statusFiltered, counts, statusFilter, setStatusFilter } =
  useTransactionFilters({ transactions });

const filteredAndSorted = useMemo(() => {
  let result = statusFiltered;

  // Type filter (adicional)
  if (typeFilter !== "all") {
    result = result.filter(t => t.type === typeFilter);
  }

  // Sort
  return [...result].sort(...);
}, [statusFiltered, typeFilter, sortField, sortOrder]);
```

Remover:
- StatusFilterTabs component inline
- statusFilter useState
- pendingCount/completedCount useMemo
  </action>
  <verify>
grep "useTransactionFilters" src/app/(dashboard)/transacoes/page.tsx
grep "TransactionFilters" src/app/(dashboard)/transacoes/page.tsx
grep "StatusFilterTabs" src/app/(dashboard)/transacoes/page.tsx (nao deve encontrar)
npm run build
  </verify>
  <done>
Transacoes usa hook compartilhado
Transacoes usa componente TransactionFilters
Codigo duplicado removido
  </done>
</task>

</tasks>

<verification>
1. Transacoes importa useTransactionFilters
2. Transacoes importa TransactionFilters
3. StatusFilterTabs inline removido
4. `npm run build` compila sem erros
5. Filtros funcionam igual ao antes
</verification>

<success_criteria>
- Mesmos componentes usados em Dashboard e Transacoes
- Logica de filtro centralizada no hook
- Build passa
- Funcionalidade mantida
</success_criteria>

<output>
After completion, create `.planning/phases/01-componentes-layout/01-04-SUMMARY.md`
</output>
