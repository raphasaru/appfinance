---
phase: 01-componentes-layout
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/hooks/use-transaction-filters.ts
  - src/components/transactions/transaction-filters.tsx
autonomous: true

must_haves:
  truths:
    - "useTransactionFilters retorna transactions filtradas e metodos de filtro"
    - "Hook aceita lista de transacoes e retorna filtered + counters"
    - "TransactionFilters renderiza tabs com contadores"
  artifacts:
    - path: "src/lib/hooks/use-transaction-filters.ts"
      provides: "Hook compartilhado para logica de filtro"
      exports: ["useTransactionFilters"]
    - path: "src/components/transactions/transaction-filters.tsx"
      provides: "Componente de tabs de filtro reutilizavel"
      exports: ["TransactionFilters"]
  key_links:
    - from: "src/components/transactions/transaction-filters.tsx"
      to: "src/lib/hooks/use-transaction-filters.ts"
      via: "import { useTransactionFilters }"
      pattern: "useTransactionFilters"
---

<objective>
Criar hook useTransactionFilters e componente TransactionFilters reutilizaveis.

Purpose: Eliminar duplicacao de logica de filtro entre Dashboard e Transacoes.
Output: Hook centralizado + componente de tabs de filtro.
</objective>

<execution_context>
@/Users/charbellelopes/.claude/get-shit-done/workflows/execute-plan.md
@/Users/charbellelopes/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@src/app/(dashboard)/dashboard/page.tsx
@src/app/(dashboard)/transacoes/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Criar useTransactionFilters hook</name>
  <files>src/lib/hooks/use-transaction-filters.ts</files>
  <action>
Criar hook useTransactionFilters:

```typescript
type StatusFilter = "all" | "pending" | "completed";

interface UseTransactionFiltersOptions {
  transactions: Transaction[] | undefined;
  defaultStatus?: StatusFilter;
}

interface UseTransactionFiltersReturn {
  // Filtered data
  filtered: Transaction[];

  // Counts
  counts: {
    all: number;
    pending: number;
    completed: number;
  };

  // Filter state
  statusFilter: StatusFilter;
  setStatusFilter: (filter: StatusFilter) => void;
}
```

Implementacao:
1. useState para statusFilter com default "all"
2. useMemo para calcular counts (all, pending, completed)
3. useMemo para filtrar transactions baseado em statusFilter
4. Mapear "pending" -> status === "planned", "completed" -> status === "completed"

Nao incluir: type filter (receita/despesa), sort - esses ficam especificos de cada pagina.
  </action>
  <verify>
Arquivo existe em src/lib/hooks/use-transaction-filters.ts
Exporta useTransactionFilters
TypeScript compila sem erros
  </verify>
  <done>
Hook useTransactionFilters criado com interface clara
Retorna filtered, counts, statusFilter, setStatusFilter
  </done>
</task>

<task type="auto">
  <name>Task 2: Criar TransactionFilters componente</name>
  <files>src/components/transactions/transaction-filters.tsx</files>
  <action>
Criar componente TransactionFilters:

Props:
- statusFilter: StatusFilter
- onStatusChange: (filter: StatusFilter) => void
- counts: { all: number; pending: number; completed: number }
- variant?: "tabs" | "pills" (default "tabs")

Visual (variant="tabs"):
- Usar Shadcn Tabs component
- 3 tabs: Todas | Pendentes | Concluidas
- Cada tab mostra contador em Badge ou span

Visual (variant="pills"):
- Botoes arredondados lado a lado
- Estilo similar ao StatusFilterTabs atual em transacoes/page.tsx

Usar cn() para classes condicionais. Mobile-first.
  </action>
  <verify>
Arquivo existe em src/components/transactions/transaction-filters.tsx
Exporta TransactionFilters
Componente renderiza tabs com contadores
  </verify>
  <done>
TransactionFilters criado com variantes tabs e pills
Mostra contadores em cada opcao
Pronto para uso em Dashboard e Transacoes
  </done>
</task>

</tasks>

<verification>
1. useTransactionFilters hook existe e exporta
2. TransactionFilters componente existe e exporta
3. `npm run build` compila sem erros
4. Hook retorna interface documentada
</verification>

<success_criteria>
- Hook centraliza logica de filtro por status
- Componente renderiza tabs com contadores
- Ambos prontos para integracao nas paginas
- Build passa
</success_criteria>

<output>
After completion, create `.planning/phases/01-componentes-layout/01-02-SUMMARY.md`
</output>
